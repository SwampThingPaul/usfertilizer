<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction of usfertilizer, an R package â€¢ usfertilizer</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction of usfertilizer, an R package">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">usfertilizer</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Introduction.html">Introduction of usfertilizer, an R package</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/wenlong-liu/usfertilizer">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Introduction of usfertilizer, an R package</h1>
                        <h4 class="author">Wenlong Liu</h4>
            
            <h4 class="date">2018-03-23</h4>
      
      <small>Source: <a href="https://github.com/wenlong-liu/usfertilizer/blob/master/vignettes/Introduction.Rmd"><code>vignettes/Introduction.Rmd</code></a></small>

    </div>

    
    
<div class="contents">
<div id="preface" class="section level2">
<h2 class="hasAnchor">
<a href="#preface" class="anchor"></a>Preface</h2>
<p>Nutrients as commercial fertilizer is an important input to soil water systems, especially in agricultural fields. It is critical to, at least roughly, estimate the quantity of fertilizer application in the watershed, to conduct further evaluation of water quality from certain watersheds. Since 1990, folks from United States Geological Service (USGS) have investigated considerable time, manpower and efforts to estimate the fertilizer application in county scales. Based on the sales data of commercial fertilizer, USGS researchers allocated the sold fertilizer to each county based on agricultural production, arable land, growing seasons, etc. Further details are available through coming tutorials and the cited websites. Although there is no perfect way to estimate the nutrient application in watershed, the datasets from USGS have been carefully reviewed and can serve as an indication of nutrients input from commercial fertilizer. In addition, please employ this datasets at watershed or regional scales. Please note that USGS does not endorse this package and this package does not include manure data. Also data from 1986 is not available for now.</p>
</div>
<div id="installment" class="section level2">
<h2 class="hasAnchor">
<a href="#installment" class="anchor"></a>Installment</h2>
<p>For now, you can install it via my Github Repsotory.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.package("devtools") # In case you have not installed it.</span>
devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"wenlong-liu/usfertilizer"</span>)</code></pre></div>
<p>In the future, I will try to submit it for cran. You can also install it via:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"usfertilizer"</span>)
<span class="co"># not available yet.</span></code></pre></div>
</div>
<div id="get-started" class="section level1">
<h1 class="hasAnchor">
<a href="#get-started" class="anchor"></a>Get started</h1>
<div id="import-data-and-related-libraries" class="section level2">
<h2 class="hasAnchor">
<a href="#import-data-and-related-libraries" class="anchor"></a>Import data and related libraries</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(usfertilizer)
<span class="kw">require</span>(tidyverse)
<span class="kw">data</span>(<span class="st">"us_fertilizer_county"</span>)</code></pre></div>
</div>
<div id="summary-of-the-dataset" class="section level2">
<h2 class="hasAnchor">
<a href="#summary-of-the-dataset" class="anchor"></a>1.2 Summary of the dataset</h2>
<p>The dataset, named by us_fertilizer_county, contains 582012 observations and 11 variables. Details are available by using <code><a href="../reference/us_fertilizer_county.html">?us_fertilizer_county</a></code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">glimpse</span>(us_fertilizer_county)
<span class="co">#&gt; Observations: 582,012</span>
<span class="co">#&gt; Variables: 11</span>
<span class="co">#&gt; $ FIPS       &lt;chr&gt; "01001", "01003", "01005", "01007", "01009", "01011...</span>
<span class="co">#&gt; $ State      &lt;chr&gt; "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL...</span>
<span class="co">#&gt; $ County     &lt;chr&gt; "Autauga", "Baldwin", "Barbour", "Bibb", "Blount", ...</span>
<span class="co">#&gt; $ ALAND      &lt;dbl&gt; 1539582278, 4117521611, 2291818968, 1612480789, 166...</span>
<span class="co">#&gt; $ AWATER     &lt;dbl&gt; 25775735, 1133190229, 50864716, 9289057, 15157440, ...</span>
<span class="co">#&gt; $ INTPTLAT   &lt;dbl&gt; 32.53638, 30.65922, 31.87067, 33.01589, 33.97745, 3...</span>
<span class="co">#&gt; $ INTPTLONG  &lt;dbl&gt; -86.64449, -87.74607, -85.40546, -87.12715, -86.567...</span>
<span class="co">#&gt; $ Quantity   &lt;dbl&gt; 1580225, 6524369, 2412372, 304592, 1825118, 767573,...</span>
<span class="co">#&gt; $ Year       &lt;chr&gt; "1987", "1987", "1987", "1987", "1987", "1987", "19...</span>
<span class="co">#&gt; $ Fertilizer &lt;chr&gt; "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "...</span>
<span class="co">#&gt; $ Farm.Type  &lt;chr&gt; "farm", "farm", "farm", "farm", "farm", "farm", "fa...</span></code></pre></div>
</div>
</div>
<div id="examples" class="section level1">
<h1 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h1>
<div id="example-1-find-out-the-top-10-counties-with-most-nitrogen-appliation-in-1990-" class="section level2">
<h2 class="hasAnchor">
<a href="#example-1-find-out-the-top-10-counties-with-most-nitrogen-appliation-in-1990-" class="anchor"></a>Example 1: Find out the top 10 counties with most nitrogen appliation in 1990.</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># plot the top 10 nitrogen application in year 1990.</span>
<span class="co"># Reorder to make the plot more cleanner.</span>
year_plot =<span class="st"> </span><span class="dv">2008</span>
us_fertilizer_county <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(Fertilizer <span class="op">==</span><span class="st"> "N"</span> <span class="op">&amp;</span><span class="st"> </span>Year <span class="op">==</span><span class="st"> </span>year_plot) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">top_n</span>(<span class="dv">10</span>, Quantity) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span><span class="kw">reorder</span>(<span class="kw">paste</span>(County,State, <span class="dt">sep =</span> <span class="st">","</span>), Quantity), Quantity, <span class="dt">fill =</span> Quantity))<span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_gradient</span>(<span class="dt">low =</span> <span class="st">"blue"</span>, <span class="dt">high =</span> <span class="st">"darkblue"</span>)<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>()<span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="kw">paste</span>(<span class="st">"Top 10 counties with most fertilizer application in the year of"</span>, year_plot)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">coord_flip</span>()<span class="op">+</span>
<span class="st">  </span><span class="kw">theme_bw</span>()</code></pre></div>
<p><img src="Introduction_files/figure-html/unnamed-chunk-5-1.png" width="672"></p>
</div>
<div id="example-2-find-out-the-top-10-states-with-most-nitrogen-appliation-in-1980-" class="section level2">
<h2 class="hasAnchor">
<a href="#example-2-find-out-the-top-10-states-with-most-nitrogen-appliation-in-1980-" class="anchor"></a>Example 2: Find out the top 10 states with most nitrogen appliation in 1980.</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># plot the top 10 states with P application in year 1980.</span>
<span class="co"># Reorder to make the plot more cleanner.</span>
year_plot =<span class="st"> </span><span class="dv">1980</span>
us_fertilizer_county <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(Fertilizer <span class="op">==</span><span class="st"> "P"</span> <span class="op">&amp;</span><span class="st"> </span>Year <span class="op">==</span><span class="st"> </span><span class="dv">1980</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(State) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">p_application =</span> <span class="kw">sum</span>(Quantity)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">as.data.frame</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">top_n</span>(<span class="dv">10</span>, p_application) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span><span class="kw">reorder</span>(State, p_application), p_application))<span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_gradient</span>(<span class="dt">low =</span> <span class="st">"blue"</span>, <span class="dt">high =</span> <span class="st">"darkblue"</span>)<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_col</span>()<span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="kw">paste</span>(<span class="st">"Top 10 States with most Phosphrus application in the year of"</span>, year_plot)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">"Phosphrus from commecial fertilization (kg)"</span>)<span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_discrete</span>(<span class="dt">name =</span> <span class="st">"States"</span>)<span class="op">+</span>
<span class="st">  </span><span class="kw">theme_bw</span>()<span class="op">+</span>
<span class="st">  </span><span class="kw">coord_flip</span>()</code></pre></div>
<p><img src="Introduction_files/figure-html/unnamed-chunk-6-1.png" width="672"></p>
</div>
<div id="example-3-plot-the-n-and-p-input-into-farms-for-nc-and-sc-from-1945-to-2010" class="section level2">
<h2 class="hasAnchor">
<a href="#example-3-plot-the-n-and-p-input-into-farms-for-nc-and-sc-from-1945-to-2010" class="anchor"></a>Example 3: Plot the N and P input into farms for NC and SC from 1945 to 2010</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">year_plot =<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1945</span>, <span class="dv">2010</span>, <span class="dv">1</span>)
states =<span class="st"> </span><span class="kw">c</span>(<span class="st">"NC"</span>,<span class="st">"SC"</span>)

us_fertilizer_county <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(State <span class="op">%in%</span><span class="st"> </span>states <span class="op">&amp;</span><span class="st"> </span>Year <span class="op">%in%</span><span class="st"> </span>year_plot <span class="op">&amp;</span>
<span class="st">           </span>Farm.Type <span class="op">==</span><span class="st"> "farm"</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(State, Year, Fertilizer) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Quantity =</span> <span class="kw">sum</span>(Quantity)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">as.numeric</span>(Year), <span class="dt">y =</span> Quantity, <span class="dt">color=</span>State)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>()<span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">name =</span> <span class="st">"Year"</span>)<span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">"Nutrient input quantity (kg)"</span>)<span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Fertilizer, <span class="dt">scales =</span> <span class="st">"free"</span>, <span class="dt">ncol =</span> <span class="dv">2</span>)<span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">"Estimated nutrient inputs into arable lands by commercial fertilizer</span><span class="ch">\n</span><span class="st">from 1945 to 2010 in Carolinas"</span>)<span class="op">+</span>
<span class="st">  </span><span class="kw">theme_bw</span>()</code></pre></div>
<p><img src="Introduction_files/figure-html/unnamed-chunk-7-1.png" width="672"></p>
</div>
</div>
<div id="comments-and-questions-" class="section level1">
<h1 class="hasAnchor">
<a href="#comments-and-questions-" class="anchor"></a>Comments and Questions.</h1>
<p>If you have any problems or questions, feel free to open an issue <a href="https://github.com/wenlong-liu/usfertilizer/issues">here</a>.</p>
</div>
<div id="lisence" class="section level1">
<h1 class="hasAnchor">
<a href="#lisence" class="anchor"></a>Lisence</h1>
<p>GPL</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">us_fertilizer_county <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(Year) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">group_by</span>(Year) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">row_number</span>() <span class="op">==</span><span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(Year)
<span class="co">#&gt; # A tibble: 68 x 1</span>
<span class="co">#&gt; # Groups:   Year [68]</span>
<span class="co">#&gt;    Year </span>
<span class="co">#&gt;    &lt;chr&gt;</span>
<span class="co">#&gt;  1 1945 </span>
<span class="co">#&gt;  2 1946 </span>
<span class="co">#&gt;  3 1947 </span>
<span class="co">#&gt;  4 1948 </span>
<span class="co">#&gt;  5 1949 </span>
<span class="co">#&gt;  6 1950 </span>
<span class="co">#&gt;  7 1951 </span>
<span class="co">#&gt;  8 1952 </span>
<span class="co">#&gt;  9 1953 </span>
<span class="co">#&gt; 10 1954 </span>
<span class="co">#&gt; # ... with 58 more rows</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#preface">Preface</a></li>
      <li><a href="#installment">Installment</a></li>
      <li>
<a href="#get-started">Get started</a><ul class="nav nav-pills nav-stacked">
<li><a href="#import-data-and-related-libraries">Import data and related libraries</a></li>
      <li><a href="#summary-of-the-dataset">1.2 Summary of the dataset</a></li>
      </ul>
</li>
      <li>
<a href="#examples">Examples</a><ul class="nav nav-pills nav-stacked">
<li><a href="#example-1-find-out-the-top-10-counties-with-most-nitrogen-appliation-in-1990-">Example 1: Find out the top 10 counties with most nitrogen appliation in 1990.</a></li>
      <li><a href="#example-2-find-out-the-top-10-states-with-most-nitrogen-appliation-in-1980-">Example 2: Find out the top 10 states with most nitrogen appliation in 1980.</a></li>
      <li><a href="#example-3-plot-the-n-and-p-input-into-farms-for-nc-and-sc-from-1945-to-2010">Example 3: Plot the N and P input into farms for NC and SC from 1945 to 2010</a></li>
      </ul>
</li>
      <li><a href="#comments-and-questions-">Comments and Questions.</a></li>
      <li><a href="#lisence">Lisence</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Wenlong Liu.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
